var app=new Vue({el:'#app',filters:{highlight:function(value,searchTerm){let index=value.toLowerCase().indexOf(searchTerm.toLowerCase());if(index<0)
{return value;}
return value.substring(0,index)+"<span class='highlight'>"+value.substring(index,index+searchTerm.length)+"</span>"+value.substring(index+searchTerm.length);}},data:{searchTerm:"",siteIndex:[],searchResults:[],showMobileMenu:false,contactSuccess:"",contactEmail:"",contactPhone:"",contactMessage:"",contactFullName:"",contactEmailError:"",contactMessageError:"",contactFullNameError:""},methods:{loadSiteIndex:function(){let that=this;if(that.searchResults.length>0){return;}
axios.get('index.json').then(function(response){that.siteIndex=response.data;}).catch(function(error){console.log(error);});},doSearch:function(e){let that=this;var options={shouldSort:true,includeMatches:true,threshold:0.4,tokenize:true,location:0,distance:100,maxPatternLength:32,minMatchCharLength:1,keys:[{name:"title",weight:0.8},{name:"contents",weight:0.5},{name:"tags",weight:0.3},{name:"categories",weight:0.3}]}
var fuse=new Fuse(that.siteIndex,options);var results=fuse.search(this.searchTerm);that.searchResults=results;e.preventDefault();},mobileMenuToggle:function(){this.showMobileMenu=!this.showMobileMenu;},doContactSubmit:function(){var that=this;this.contactEmailError="";this.contactMessageError="";this.contactFullNameError="";if(this.contactEmail.length<=2){this.contactEmailError="Valid email address is required.";}
if(this.contactFullName.length<2){this.contactFullNameError="Valid full name is required.";}
if(this.contactMessage.length<2){this.contactMessageError="Valid message is required.";}
if(this.contactEmailError||this.contactFullNameError||this.contactMessageError){return;}
axios.post('https://app.skyclerk.com/support/contact-us',{fullName:this.contactFullName,email:this.contactEmail,phone:this.contactPhone,message:this.contactMessage}).then(function(response){if(response.status==204){that.contactSuccess="Thank you for submitting your contact request. We will get back to you very shorty.";that.contactEmail="";that.contactPhone="";that.contactMessage="";that.contactFullName="";}else{alert("Something went wrong. Maybe try to email help@skyclerk.com instead.");}}).catch(function(error){alert("Something went wrong. Maybe try to email help@skyclerk.com instead.");});}},created:function(){this.loadSiteIndex();}});