{% extends "layouts/_main" %}

{% set query = craft.app.request.getParam('q') %}

{% if query is not empty %}
{% paginate craft.entries.section('blog').search(query).orderBy('postDate desc').limit(1000) as pageInfo, entries %}
{% else %}
{% paginate craft.entries.section('blog').orderBy('postDate desc').limit(15) as pageInfo, entries %}
{% endif %}

{% block content %}

<div class="main">
	{% include "blog/_modules/blogIntroSmall" %}

	<section class="section">
		{% include "blog/_modules/blogList" %}
	</section>

	{% include "modules/_newsletter" %}
</div>

{% endblock %}
